# WearOTP 应用锁定功能测试说明

## 功能概述
已实现的应用锁定功能包括：
1. **密码锁定** - 使用自定义密码保护应用
2. **后台立即锁定** - 应用切换到后台时立即锁定
3. **自动超时锁定** - 指定时间后自动锁定应用

## 测试步骤

### 1. 首次设置密码
1. 打开应用，进入设置页面
2. 找到"密码锁定"选项，开启开关
3. 设置一个4-6位数字密码
4. 确认密码设置成功

### 2. 测试后台立即锁定
1. 在设置中开启"退到后台立刻锁定"选项
2. 返回主界面
3. **测试方法**: 按Home键或切换到其他应用
4. **预期结果**: 重新进入应用时应该显示密码输入界面
5. 输入正确密码解锁应用

### 3. 测试自动超时锁定
1. 在设置中关闭"退到后台立刻锁定"选项
2. 设置自动锁定时间（如30秒）
3. **测试方法**: 切换到后台并等待超过设定时间
4. **预期结果**: 重新进入应用时应该显示密码输入界面

### 4. 查看调试日志
如果功能不正常，可以通过以下命令查看日志：
```bash
adb logcat | grep AppLockManager
```

## 调试信息
应用已添加详细的日志输出，包括：
- 生命周期事件（onStart/onStop）
- 密码设置状态
- 锁定触发条件
- 后台时长计算

## 可能的问题
1. **生命周期未正确触发** - 检查MainActivity是否正确注册了AppLockManager
2. **密码未设置** - 确保已正确设置并保存密码
3. **设置未保存** - 检查SettingsManager是否正确保存了锁定选项

## APK位置
- 手机版: `mobile/build/outputs/apk/release/mobile-release.apk`
- 手表版: `wear/build/outputs/apk/release/wear-release.apk`